/* packages/web/app/globals.css */

/* ============================================
   REDUCED MOTION (global safety)
   ============================================ */
@media (prefers-reduced-motion: reduce) {
  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
    scroll-behavior: auto !important;
  }
}

/* ============================================
   CSS RESET
   ============================================ */
*,
*::before,
*::after {
  box-sizing: border-box;
}

* {
  margin: 0;
}

html {
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

body {
  line-height: 1.5;
}

img,
picture,
video,
canvas,
svg {
  display: block;
  max-width: 100%;
}

input,
button,
textarea,
select {
  font: inherit;
}

p,
h1,
h2,
h3,
h4,
h5,
h6 {
  overflow-wrap: break-word;
}

/* ============================================
   GLOBAL TOKENS (shared)
   ============================================ */
:root {
  --spacing-0: 0;
  --spacing-1: 0.25rem; /* 4px */
  --spacing-2: 0.5rem; /* 8px */
  --spacing-3: 0.75rem; /* 12px */
  --spacing-4: 1rem; /* 16px */
  --spacing-5: 1.25rem; /* 20px */
  --spacing-6: 1.5rem; /* 24px */
  --spacing-8: 2rem; /* 32px */
  --spacing-10: 2.5rem; /* 40px */
  --spacing-12: 3rem; /* 48px */
  --spacing-16: 4rem; /* 64px */
  --spacing-20: 5rem; /* 80px */
  --spacing-24: 6rem; /* 96px */

  --duration-fast: 150ms;
  --duration-normal: 200ms;
  --duration-slow: 300ms;
  --ease-out: cubic-bezier(0.0, 0.0, 0.2, 1);

  --container-padding-x: 1.5rem;

  /* App-level surfaces */
  --app-bg-gradient: none;
  --app-grain: none;
  --app-grain-opacity: 0;

  /* UI tokens (mode overrides) */
  --ui-nav-bg: rgba(255, 255, 255, 0.8);
  --ui-nav-border: rgba(15, 23, 42, 0.12);
  --ui-nav-backdrop-filter: blur(10px);

  --ui-card-bg: var(--color-surface);
  --ui-card-border: var(--color-border);

  --ui-input-bg: var(--color-surface);
  --ui-input-border: var(--color-border);
  --ui-input-border-hover: var(--color-border-strong);

  --ui-button-font: var(--font-body);
  --ui-button-letter-spacing: 0.01em;
  --ui-button-text-transform: none;

  --ui-badge-font: var(--font-body);
  --ui-badge-letter-spacing: 0.01em;
  --ui-badge-text-transform: none;

  /* Social UI tokens (mode overrides) */
  --social-composer-bg: var(--ui-card-bg, var(--color-surface));
  --social-composer-border: var(--ui-card-border, var(--color-border));
  --social-composer-accent: var(--color-accent);
  --social-composer-rule: none;
  --social-composer-rule-opacity: 0;

  --social-chip-bg: var(--color-bg-subtle);
  --social-chip-border: var(--color-border);
  --social-chip-text: var(--color-text-muted);

  --social-meta-text: var(--color-text-muted);
  --social-divider: var(--color-border);
}

/* ============================================
   MODE: STUDIO DESK (light-first)
   ============================================ */
html[data-theme="studio"] {
  --color-bg: #f6f7fa;
  --color-bg-subtle: #eef2f7;
  --color-surface: #ffffff;
  --color-surface-hover: #f7faff;

  --color-text: #101622;
  --color-text-muted: #5b677a;
  --color-text-subtle: #7c8798;

  --color-primary: #101b2d;
  --color-primary-hover: #162744;
  --color-on-primary: #ffffff;
  --color-accent: #b08d57;

  --color-border: #d9dfea;
  --color-border-strong: #c3ccda;
  --color-border-focus: #2b59ff;

  --color-success: #0f8b5f;
  --color-warning: #b45309;
  --color-error: #b42318;
  --color-info: #1d4ed8;

  --color-link: #2b59ff;
  --color-link-hover: #1f46d6;

  --font-display: var(--font-sora), ui-sans-serif, system-ui, -apple-system, Segoe UI, Arial;
  --font-body: var(--font-spline-sans), ui-sans-serif, system-ui, -apple-system, Segoe UI, Arial;
  --font-mono: var(--font-azeret-mono), ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", monospace;

  --radius-sm: 10px;
  --radius-md: 14px;
  --radius-lg: 18px;
  --radius-full: 9999px;

  --shadow-sm: 0 1px 1px rgba(16, 22, 34, 0.06), 0 2px 8px rgba(16, 22, 34, 0.05);
  --shadow-md: 0 8px 24px rgba(16, 22, 34, 0.08);
  --shadow-lg: 0 18px 44px rgba(16, 22, 34, 0.12);
  --shadow-glow: 0 0 0 rgba(0, 0, 0, 0);
  --shadow-button: 0 8px 20px rgba(16, 22, 34, 0.10);
  --shadow-button-hover: 0 12px 28px rgba(16, 22, 34, 0.14);

  --button-hover-transform: translateY(-1px);
  --card-hover-transform: translateY(-2px);

  --ui-nav-bg: color-mix(in srgb, var(--color-bg) 74%, transparent);
  --ui-nav-border: color-mix(in srgb, var(--color-border) 85%, transparent);
  --ui-nav-backdrop-filter: blur(12px) saturate(140%);

  --ui-card-bg: linear-gradient(180deg, rgba(255, 255, 255, 0.92), #ffffff 42%);
  --ui-card-border: color-mix(in srgb, var(--color-border) 92%, #ffffff);

  --ui-input-bg: #fcfdff;
  --ui-input-border: color-mix(in srgb, var(--color-border) 92%, #ffffff);
  --ui-input-border-hover: var(--color-border-strong);

  --ui-button-font: var(--font-body);
  --ui-button-letter-spacing: 0.01em;
  --ui-button-text-transform: none;

  --ui-badge-font: var(--font-body);
  --ui-badge-letter-spacing: 0.01em;
  --ui-badge-text-transform: none;

  --social-composer-accent: color-mix(in srgb, var(--color-link) 72%, var(--color-accent));
  --social-chip-bg: color-mix(in srgb, rgba(43, 89, 255, 0.10) 70%, var(--color-bg-subtle));
  --social-chip-border: rgba(43, 89, 255, 0.22);
  --social-chip-text: var(--color-text);
  --social-divider: color-mix(in srgb, var(--color-border) 90%, transparent);

  --app-bg-gradient:
    radial-gradient(900px 540px at 12% -10%, rgba(43, 89, 255, 0.12), transparent 60%),
    radial-gradient(800px 520px at 92% -12%, rgba(176, 141, 87, 0.14), transparent 55%),
    linear-gradient(to bottom, var(--color-bg), var(--color-bg-subtle));
  --app-grain:
    repeating-radial-gradient(circle at 0 0, rgba(16, 22, 34, 0.05) 0, rgba(16, 22, 34, 0.05) 1px, transparent 1px, transparent 3px);
  --app-grain-opacity: 0.10;
}

/* ============================================
   MODE: LINER NOTES (light-first)
   ============================================ */
html[data-theme="liner"] {
  --color-bg: #fbf6ee;
  --color-bg-subtle: #f6efe4;
  --color-surface: #fffaf1;
  --color-surface-hover: #fff3e4;

  --color-text: #2a2118;
  --color-text-muted: rgba(42, 33, 24, 0.62);
  --color-text-subtle: rgba(42, 33, 24, 0.40);

  --color-primary: #2a2118;
  --color-primary-hover: #1f1811;
  --color-on-primary: #fffaf1;
  --color-accent: #1f5b4a;

  --color-border: rgba(42, 33, 24, 0.14);
  --color-border-strong: rgba(42, 33, 24, 0.22);
  --color-border-focus: #b24a2c;

  --color-success: #0f8b5f;
  --color-warning: #b45309;
  --color-error: #b42318;
  --color-info: #1d4ed8;

  --color-link: #b24a2c;
  --color-link-hover: #943c24;

  --font-display: var(--font-instrument-serif), ui-serif, Georgia, Cambria, "Times New Roman", Times, serif;
  --font-body: var(--font-source-serif-4), ui-serif, Georgia, Cambria, "Times New Roman", Times, serif;
  --font-mono: var(--font-azeret-mono), ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", monospace;

  --radius-sm: 12px;
  --radius-md: 16px;
  --radius-lg: 22px;
  --radius-full: 9999px;

  --shadow-sm: 0 1px 0 rgba(42, 33, 24, 0.06), 0 10px 30px rgba(42, 33, 24, 0.06);
  --shadow-md: 0 14px 42px rgba(42, 33, 24, 0.09);
  --shadow-lg: 0 20px 60px rgba(42, 33, 24, 0.12);
  --shadow-glow: none;
  --shadow-button: 0 10px 26px rgba(42, 33, 24, 0.10);
  --shadow-button-hover: 0 14px 34px rgba(42, 33, 24, 0.14);

  --button-hover-transform: translateY(-1px) rotate(-0.2deg);
  --card-hover-transform: translateY(-2px) rotate(0.15deg);

  --ui-nav-bg: rgba(251, 246, 238, 0.92);
  --ui-nav-border: rgba(42, 33, 24, 0.14);
  --ui-nav-backdrop-filter: none;

  --ui-card-bg: linear-gradient(180deg, rgba(255, 252, 246, 0.98), var(--color-surface));
  --ui-card-border: rgba(42, 33, 24, 0.14);

  --ui-input-bg: rgba(255, 253, 248, 0.92);
  --ui-input-border: rgba(42, 33, 24, 0.16);
  --ui-input-border-hover: rgba(42, 33, 24, 0.24);

  --ui-button-font: var(--font-mono);
  --ui-button-letter-spacing: 0.08em;
  --ui-button-text-transform: uppercase;

  --ui-badge-font: var(--font-mono);
  --ui-badge-letter-spacing: 0.08em;
  --ui-badge-text-transform: uppercase;

  --social-composer-accent: var(--color-link);
  --social-composer-rule:
    repeating-linear-gradient(
      0deg,
      rgba(42, 33, 24, 0.06) 0,
      rgba(42, 33, 24, 0.06) 1px,
      transparent 1px,
      transparent 22px
    );
  --social-composer-rule-opacity: 0.22;

  --social-chip-bg: rgba(178, 74, 44, 0.08);
  --social-chip-border: rgba(178, 74, 44, 0.20);
  --social-chip-text: var(--color-text);
  --social-divider: rgba(42, 33, 24, 0.14);

  --app-bg-gradient:
    radial-gradient(1000px 700px at 18% -18%, rgba(178, 74, 44, 0.12), transparent 58%),
    radial-gradient(760px 520px at 88% -10%, rgba(31, 91, 74, 0.10), transparent 60%),
    linear-gradient(to bottom, var(--color-bg), var(--color-bg-subtle));
  --app-grain:
    repeating-linear-gradient(0deg, rgba(42, 33, 24, 0.035) 0, rgba(42, 33, 24, 0.035) 1px, transparent 1px, transparent 5px),
    repeating-radial-gradient(circle at 0 0, rgba(42, 33, 24, 0.03) 0, rgba(42, 33, 24, 0.03) 1px, transparent 1px, transparent 4px);
  --app-grain-opacity: 0.22;
}

/* ============================================
   BASE ELEMENTS
   ============================================ */
body {
  background-color: var(--color-bg);
  background-image: var(--app-bg-gradient);
  color: var(--color-text);
  font-family: var(--font-body);
  min-height: 100vh;
}

body::before {
  content: "";
  position: fixed;
  inset: 0;
  pointer-events: none;
  background-image: var(--app-grain);
  opacity: var(--app-grain-opacity);
  mix-blend-mode: multiply;
  z-index: 0;
}

body > * {
  position: relative;
  z-index: 1;
}

main {
  padding: var(--spacing-10) 0 var(--spacing-16);
}

a {
  color: var(--color-link);
  text-decoration: none;
  transition: color var(--duration-fast) var(--ease-out);
}

a:hover {
  color: var(--color-link-hover);
}

:focus-visible {
  outline: 2px solid var(--color-border-focus);
  outline-offset: 2px;
}

::selection {
  background-color: var(--color-primary);
  color: var(--color-on-primary);
}
